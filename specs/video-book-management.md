# 機能仕様: 動画ベース蔵書管理システム

**機能名**: Video-Based Book Management System  
**作成日**: 2025-11-05  
**ステータス**: Draft

## 概要

動画ファイルから書籍タイトルを自動認識し、蔵書の登録・管理・貸出管理を行うシステム。

## ユーザーストーリー

### US-1: 動画からの書籍認識

**As a** 図書館員
**I want to** 書架を撮影した動画から書籍情報を自動抽出したい  
**So that** 手作業での蔵書登録の手間を削減できる

**受け入れ基準**:

- 対応動画形式: MP4, MOV, AVI
- 動画から静止画フレームを抽出
- OCR技術により書籍タイトルを認識
- 認識精度80%以上
- 認識結果をユーザーが確認・編集可能

### US-2: 蔵書管理

**As a** 図書館員  
**I want to** 認識した書籍情報を管理したい  
**So that** 蔵書の在庫状況を把握できる

**受け入れ基準**:

- 書籍情報（タイトル、著者、登録日）を保存
- 書籍の検索・一覧表示
- 書籍情報の編集・削除
- 重複登録のチェック機能

### US-3: 貸出管理

**As a** 図書館員  
**I want to** 書籍の貸出・返却・期限を管理したい  
**So that** 貸出状況を正確に把握できる

**受け入れ基準**:

- 貸出者情報と貸出日を記録
- 返却期限の自動計算（デフォルト14日）
- 返却期限超過のアラート表示
- 貸出履歴の記録と表示
- 返却処理機能

## 機能要件

### F-1: 動画処理機能

- 動画ファイルのアップロード
- フレーム抽出（1秒ごと or ユーザー指定間隔）
- 抽出フレームのプレビュー表示

### F-2: OCR/文字認識機能

- 画像から文字領域の検出
- テキスト抽出（日本語・英語対応）
- 認識結果の信頼度スコア表示
- ユーザーによる手動修正UI

### F-3: 書籍データベース

- 書籍情報のCRUD操作
- タイトル・著者での検索
- カテゴリ分類機能
- 書籍の在庫状態（在庫中/貸出中）

### F-4: 貸出管理機能

- 貸出登録（借り手、貸出日、返却予定日）
- 返却処理
- 期限超過書籍の一覧表示
- 貸出履歴の確認

## 非機能要件

### NFR-1: パフォーマンス

- 検索応答: 1秒以内

### NFR-2: ユーザビリティ

- 直感的なUI/UX
- レスポンシブデザイン対応
- エラーメッセージは日本語で明確に

### NFR-3: セキュリティ

### NFR-4: 保守性

- モジュール設計（動画処理、OCR、DB、UI分離）
- API文書の自動生成

## 技術スタック（案）

- **バックエンド**: Node.js + Express
- **データベース**: PostgreSQL
- **OCR**: Tesseract.js or Google Cloud Vision API
- **動画処理**: FFmpeg
- **フロントエンド**: React or Vue.js
- **テスト**: Jest

## 制約事項

- 初期バージョンは日本語と英語のみ対応
- オフライン動作は非対応（OCR APIに依存）
- 動画サイズ上限: 500MB
- 同時処理数: 最大5件

## 成功基準

- OCR認識精度80%以上
- ユーザー操作からデータ保存まで5ステップ以内
- 貸出管理の期限アラート機能が正常動作
- すべての受け入れ基準を満たす

## マイルストーン

1. **Phase 1**: 動画処理 + OCR機能（2週間）
2. **Phase 2**: 書籍データベース + CRUD（1週間）
3. **Phase 3**: 貸出管理機能（1週間）
4. **Phase 4**: UI実装 + 統合テスト（2週間）

## 参照

- Tesseract.js: https://github.com/naptha/tesseract.js
- FFmpeg: https://ffmpeg.org/
- OCR Best Practices: [内部ドキュメント]
